ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.PWM_steering_period,"ax",%progbits
  20              		.align	1
  21              		.global	PWM_steering_period
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	PWM_steering_period:
  27              	.LVL0:
  28              	.LFB135:
  29              		.file 1 "Core/Src/main.c"
   1:Core/Src/main.c **** /* USER CODE BEGIN Header */
   2:Core/Src/main.c **** /**
   3:Core/Src/main.c ****   ******************************************************************************
   4:Core/Src/main.c ****   * @file           : main.c
   5:Core/Src/main.c ****   * @brief          : Main program body
   6:Core/Src/main.c ****   ******************************************************************************
   7:Core/Src/main.c ****   * @attention
   8:Core/Src/main.c ****   *
   9:Core/Src/main.c ****   * Copyright (c) 2022 STMicroelectronics.
  10:Core/Src/main.c ****   * All rights reserved.
  11:Core/Src/main.c ****   *
  12:Core/Src/main.c ****   * This software is licensed under terms that can be found in the LICENSE file
  13:Core/Src/main.c ****   * in the root directory of this software component.
  14:Core/Src/main.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  15:Core/Src/main.c ****   *
  16:Core/Src/main.c ****   ******************************************************************************
  17:Core/Src/main.c ****   */
  18:Core/Src/main.c **** /* USER CODE END Header */
  19:Core/Src/main.c **** /* Includes ------------------------------------------------------------------*/
  20:Core/Src/main.c **** #include "main.h"
  21:Core/Src/main.c **** #include "spi.h"
  22:Core/Src/main.c **** #include "tim.h"
  23:Core/Src/main.c **** #include "usart.h"
  24:Core/Src/main.c **** #include "gpio.h"
  25:Core/Src/main.c **** 
  26:Core/Src/main.c **** /* Private includes ----------------------------------------------------------*/
  27:Core/Src/main.c **** /* USER CODE BEGIN Includes */
  28:Core/Src/main.c **** 
  29:Core/Src/main.c **** #include <string.h>
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 2


  30:Core/Src/main.c **** #include <stdio.h>
  31:Core/Src/main.c **** #include <stdbool.h>
  32:Core/Src/main.c **** #include "tmag5170.h"
  33:Core/Src/main.c **** 
  34:Core/Src/main.c **** 
  35:Core/Src/main.c **** 
  36:Core/Src/main.c **** /* USER CODE END Includes */
  37:Core/Src/main.c **** 
  38:Core/Src/main.c **** /* Private typedef -----------------------------------------------------------*/
  39:Core/Src/main.c **** /* USER CODE BEGIN PTD */
  40:Core/Src/main.c **** 
  41:Core/Src/main.c **** /* USER CODE END PTD */
  42:Core/Src/main.c **** 
  43:Core/Src/main.c **** /* Private define ------------------------------------------------------------*/
  44:Core/Src/main.c **** /* USER CODE BEGIN PD */
  45:Core/Src/main.c **** 
  46:Core/Src/main.c **** #define ENCODER_CS ((uint8_t) 0x00)
  47:Core/Src/main.c **** #define ENCODER_CP ((uint8_t) 0x01)
  48:Core/Src/main.c **** 
  49:Core/Src/main.c **** 
  50:Core/Src/main.c **** /* USER CODE END PD */
  51:Core/Src/main.c **** 
  52:Core/Src/main.c **** /* Private macro -------------------------------------------------------------*/
  53:Core/Src/main.c **** /* USER CODE BEGIN PM */
  54:Core/Src/main.c **** 
  55:Core/Src/main.c **** /* USER CODE END PM */
  56:Core/Src/main.c **** 
  57:Core/Src/main.c **** /* Private variables ---------------------------------------------------------*/
  58:Core/Src/main.c **** 
  59:Core/Src/main.c **** /* USER CODE BEGIN PV */
  60:Core/Src/main.c **** 
  61:Core/Src/main.c **** uint16_t count = 2000;
  62:Core/Src/main.c **** uint8_t data[6];
  63:Core/Src/main.c **** //uint32_t ilosc_krokow = 1600;
  64:Core/Src/main.c **** 
  65:Core/Src/main.c **** char silnik_CS[2] = {'C', 'S'};
  66:Core/Src/main.c **** char silnik_CP[2] = {'C', 'P'};
  67:Core/Src/main.c **** 
  68:Core/Src/main.c **** 
  69:Core/Src/main.c **** bool czy_przerwanie = false;
  70:Core/Src/main.c **** bool old_czy_przerwanie = false;
  71:Core/Src/main.c **** 
  72:Core/Src/main.c **** uint8_t kierunek_obrotu = 0;
  73:Core/Src/main.c **** char kat_obrotu[3]; 
  74:Core/Src/main.c **** 
  75:Core/Src/main.c **** char silnik[2];
  76:Core/Src/main.c **** 
  77:Core/Src/main.c **** uint16_t FirstAngle = 0;
  78:Core/Src/main.c **** uint16_t SecondAngle = 0;
  79:Core/Src/main.c **** uint16_t AngleDifference = 0;
  80:Core/Src/main.c **** 
  81:Core/Src/main.c **** uint8_t WhichRotation = 0;
  82:Core/Src/main.c **** 
  83:Core/Src/main.c **** 
  84:Core/Src/main.c **** 
  85:Core/Src/main.c **** /* USER CODE END PV */
  86:Core/Src/main.c **** 
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 3


  87:Core/Src/main.c **** /* Private function prototypes -----------------------------------------------*/
  88:Core/Src/main.c **** void SystemClock_Config(void);
  89:Core/Src/main.c **** /* USER CODE BEGIN PFP */
  90:Core/Src/main.c **** 
  91:Core/Src/main.c **** // void delay(uint8_t time_ms)
  92:Core/Src/main.c **** // {
  93:Core/Src/main.c ****   
  94:Core/Src/main.c **** //   uint16_t start_time = HAL_GetTick();
  95:Core/Src/main.c **** 
  96:Core/Src/main.c **** //   uint16_t stop_time = start_time + (time_ms/HAL_GetTickFreq());
  97:Core/Src/main.c ****   
  98:Core/Src/main.c **** //   while (1)
  99:Core/Src/main.c **** //   {
 100:Core/Src/main.c **** //     if(HAL_GetTick() == stop_time)
 101:Core/Src/main.c **** //     break;
 102:Core/Src/main.c **** //   }
 103:Core/Src/main.c **** // }
 104:Core/Src/main.c **** 
 105:Core/Src/main.c **** 
 106:Core/Src/main.c **** void PWM_steering_period(float kroki_funkcja)
 107:Core/Src/main.c **** {
  30              		.loc 1 107 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		.loc 1 107 1 is_stmt 0 view .LVU1
  35 0000 08B5     		push	{r3, lr}
  36              	.LCFI0:
  37              		.cfi_def_cfa_offset 8
  38              		.cfi_offset 3, -8
  39              		.cfi_offset 14, -4
 108:Core/Src/main.c ****   float okres = 0.0;
  40              		.loc 1 108 3 is_stmt 1 view .LVU2
  41              	.LVL1:
 109:Core/Src/main.c ****   float czas_delay = 0.0;
  42              		.loc 1 109 3 view .LVU3
 110:Core/Src/main.c ****   //T = (PRS + 1)(ARR +1) / f        PRS- preskaler, ARR- period
 111:Core/Src/main.c **** 
 112:Core/Src/main.c ****   okres = ((float)htim1.Init.Period + 1) * ((float)htim1.Init.Prescaler + 1)/(float)16e6;
  43              		.loc 1 112 3 view .LVU4
  44              		.loc 1 112 29 is_stmt 0 view .LVU5
  45 0002 114B     		ldr	r3, .L3
  46              		.loc 1 112 12 view .LVU6
  47 0004 D3ED037A 		vldr.32	s15, [r3, #12]	@ int
  48 0008 F8EE677A 		vcvt.f32.u32	s15, s15
  49              		.loc 1 112 37 view .LVU7
  50 000c F7EE006A 		vmov.f32	s13, #1.0e+0
  51 0010 37EEA67A 		vadd.f32	s14, s15, s13
  52              		.loc 1 112 62 view .LVU8
  53 0014 D3ED017A 		vldr.32	s15, [r3, #4]	@ int
  54              		.loc 1 112 45 view .LVU9
  55 0018 F8EE677A 		vcvt.f32.u32	s15, s15
  56              		.loc 1 112 73 view .LVU10
  57 001c 77EEA67A 		vadd.f32	s15, s15, s13
  58              		.loc 1 112 42 view .LVU11
  59 0020 67EE277A 		vmul.f32	s15, s14, s15
  60              		.loc 1 112 9 view .LVU12
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 4


  61 0024 DFED096A 		vldr.32	s13, .L3+4
  62 0028 87EEA67A 		vdiv.f32	s14, s15, s13
  63              	.LVL2:
 113:Core/Src/main.c ****   //okres = 1/(float)1600;
 114:Core/Src/main.c **** 
 115:Core/Src/main.c ****   czas_delay = okres * kroki_funkcja * 1000;
  64              		.loc 1 115 3 is_stmt 1 view .LVU13
  65              		.loc 1 115 22 is_stmt 0 view .LVU14
  66 002c 27EE007A 		vmul.f32	s14, s14, s0
  67              	.LVL3:
  68              		.loc 1 115 14 view .LVU15
  69 0030 9FED070A 		vldr.32	s0, .L3+8
  70              	.LVL4:
  71              		.loc 1 115 14 view .LVU16
  72 0034 27EE007A 		vmul.f32	s14, s14, s0
  73              	.LVL5:
 116:Core/Src/main.c ****   ///delay(czas_delay);
 117:Core/Src/main.c ****   HAL_Delay(czas_delay);
  74              		.loc 1 117 3 is_stmt 1 view .LVU17
  75 0038 FCEEC77A 		vcvt.u32.f32	s15, s14
  76              	.LVL6:
  77              		.loc 1 117 3 is_stmt 0 view .LVU18
  78 003c 17EE900A 		vmov	r0, s15	@ int
  79 0040 FFF7FEFF 		bl	HAL_Delay
  80              	.LVL7:
 118:Core/Src/main.c **** }
  81              		.loc 1 118 1 view .LVU19
  82 0044 08BD     		pop	{r3, pc}
  83              	.L4:
  84 0046 00BF     		.align	2
  85              	.L3:
  86 0048 00000000 		.word	htim1
  87 004c 0024744B 		.word	1265902592
  88 0050 00007A44 		.word	1148846080
  89              		.cfi_endproc
  90              	.LFE135:
  92              		.section	.text.kat_to_steps,"ax",%progbits
  93              		.align	1
  94              		.global	kat_to_steps
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  99              	kat_to_steps:
 100              	.LVL8:
 101              	.LFB136:
 119:Core/Src/main.c **** 
 120:Core/Src/main.c **** float kat_to_steps(uint16_t kat)
 121:Core/Src/main.c **** { 
 102              		.loc 1 121 1 is_stmt 1 view -0
 103              		.cfi_startproc
 104              		@ args = 0, pretend = 0, frame = 0
 105              		@ frame_needed = 0, uses_anonymous_args = 0
 106              		@ link register save eliminated.
 122:Core/Src/main.c ****   float steps = 0;
 107              		.loc 1 122 3 view .LVU21
 123:Core/Src/main.c **** 
 124:Core/Src/main.c ****   steps = kat * 160/(float)36;
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 5


 108              		.loc 1 124 3 view .LVU22
 109              		.loc 1 124 15 is_stmt 0 view .LVU23
 110 0000 00EB8000 		add	r0, r0, r0, lsl #2
 111              	.LVL9:
 112              		.loc 1 124 15 view .LVU24
 113 0004 4001     		lsls	r0, r0, #5
 114              		.loc 1 124 20 view .LVU25
 115 0006 07EE900A 		vmov	s15, r0	@ int
 116 000a F8EEE77A 		vcvt.f32.s32	s15, s15
 117              	.LVL10:
 125:Core/Src/main.c **** 
 126:Core/Src/main.c ****   return steps;
 118              		.loc 1 126 3 is_stmt 1 view .LVU26
 127:Core/Src/main.c **** } 
 119              		.loc 1 127 1 is_stmt 0 view .LVU27
 120 000e 9FED020A 		vldr.32	s0, .L6
 121 0012 87EE800A 		vdiv.f32	s0, s15, s0
 122              	.LVL11:
 123              		.loc 1 127 1 view .LVU28
 124 0016 7047     		bx	lr
 125              	.L7:
 126              		.align	2
 127              	.L6:
 128 0018 00001042 		.word	1108344832
 129              		.cfi_endproc
 130              	.LFE136:
 132              		.section	.text.odczyt_kierunku,"ax",%progbits
 133              		.align	1
 134              		.global	odczyt_kierunku
 135              		.syntax unified
 136              		.thumb
 137              		.thumb_func
 139              	odczyt_kierunku:
 140              	.LVL12:
 141              	.LFB137:
 128:Core/Src/main.c **** 
 129:Core/Src/main.c **** void odczyt_kierunku(uint8_t dane[6])
 130:Core/Src/main.c **** {
 142              		.loc 1 130 1 is_stmt 1 view -0
 143              		.cfi_startproc
 144              		@ args = 0, pretend = 0, frame = 0
 145              		@ frame_needed = 0, uses_anonymous_args = 0
 146              		@ link register save eliminated.
 131:Core/Src/main.c ****   
 132:Core/Src/main.c ****   char debug = (char)dane[2];
 147              		.loc 1 132 3 view .LVU30
 148              		.loc 1 132 8 is_stmt 0 view .LVU31
 149 0000 8378     		ldrb	r3, [r0, #2]	@ zero_extendqisi2
 150              	.LVL13:
 133:Core/Src/main.c ****   
 134:Core/Src/main.c ****   if(debug == 'L')
 151              		.loc 1 134 3 is_stmt 1 view .LVU32
 152              		.loc 1 134 5 is_stmt 0 view .LVU33
 153 0002 4C2B     		cmp	r3, #76
 154 0004 02D0     		beq	.L11
 135:Core/Src/main.c ****   {
 136:Core/Src/main.c ****     kierunek_obrotu = 0;
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 6


 137:Core/Src/main.c ****   }
 138:Core/Src/main.c ****   else if ((char*)dane[2] == 'R')
 155              		.loc 1 138 8 is_stmt 1 view .LVU34
 156              		.loc 1 138 11 is_stmt 0 view .LVU35
 157 0006 522B     		cmp	r3, #82
 158 0008 04D0     		beq	.L12
 159              	.LVL14:
 160              	.L8:
 139:Core/Src/main.c ****   {
 140:Core/Src/main.c ****     kierunek_obrotu = 1;
 141:Core/Src/main.c ****   }
 142:Core/Src/main.c **** }
 161              		.loc 1 142 1 view .LVU36
 162 000a 7047     		bx	lr
 163              	.LVL15:
 164              	.L11:
 136:Core/Src/main.c ****   }
 165              		.loc 1 136 5 is_stmt 1 view .LVU37
 136:Core/Src/main.c ****   }
 166              		.loc 1 136 21 is_stmt 0 view .LVU38
 167 000c 034B     		ldr	r3, .L13
 168              	.LVL16:
 136:Core/Src/main.c ****   }
 169              		.loc 1 136 21 view .LVU39
 170 000e 0022     		movs	r2, #0
 171 0010 1A70     		strb	r2, [r3]
 172 0012 7047     		bx	lr
 173              	.LVL17:
 174              	.L12:
 140:Core/Src/main.c ****   }
 175              		.loc 1 140 5 is_stmt 1 view .LVU40
 140:Core/Src/main.c ****   }
 176              		.loc 1 140 21 is_stmt 0 view .LVU41
 177 0014 014B     		ldr	r3, .L13
 178              	.LVL18:
 140:Core/Src/main.c ****   }
 179              		.loc 1 140 21 view .LVU42
 180 0016 0122     		movs	r2, #1
 181 0018 1A70     		strb	r2, [r3]
 182              		.loc 1 142 1 view .LVU43
 183 001a F6E7     		b	.L8
 184              	.L14:
 185              		.align	2
 186              	.L13:
 187 001c 00000000 		.word	.LANCHOR0
 188              		.cfi_endproc
 189              	.LFE137:
 191              		.section	.text.krecenie_silnikiem,"ax",%progbits
 192              		.align	1
 193              		.global	krecenie_silnikiem
 194              		.syntax unified
 195              		.thumb
 196              		.thumb_func
 198              	krecenie_silnikiem:
 199              	.LVL19:
 200              	.LFB138:
 143:Core/Src/main.c **** 
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 7


 144:Core/Src/main.c **** void krecenie_silnikiem(char ktory_silnik[2], uint8_t kierunek, uint16_t kat)
 145:Core/Src/main.c **** {
 201              		.loc 1 145 1 is_stmt 1 view -0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205              		.loc 1 145 1 is_stmt 0 view .LVU45
 206 0000 70B5     		push	{r4, r5, r6, lr}
 207              	.LCFI1:
 208              		.cfi_def_cfa_offset 16
 209              		.cfi_offset 4, -16
 210              		.cfi_offset 5, -12
 211              		.cfi_offset 6, -8
 212              		.cfi_offset 14, -4
 213 0002 0446     		mov	r4, r0
 214 0004 0D46     		mov	r5, r1
 215 0006 1646     		mov	r6, r2
 146:Core/Src/main.c **** 
 147:Core/Src/main.c ****   uint16_t FirstAngle;
 216              		.loc 1 147 3 is_stmt 1 view .LVU46
 148:Core/Src/main.c ****   uint16_t SecondAngle;
 217              		.loc 1 148 3 view .LVU47
 149:Core/Src/main.c **** 
 150:Core/Src/main.c ****   
 151:Core/Src/main.c ****   if(strncmp(ktory_silnik, silnik_CS, 2) == 0)
 218              		.loc 1 151 3 view .LVU48
 219              		.loc 1 151 6 is_stmt 0 view .LVU49
 220 0008 0222     		movs	r2, #2
 221              	.LVL20:
 222              		.loc 1 151 6 view .LVU50
 223 000a 1F49     		ldr	r1, .L22
 224              	.LVL21:
 225              		.loc 1 151 6 view .LVU51
 226 000c FFF7FEFF 		bl	strncmp
 227              	.LVL22:
 228              		.loc 1 151 5 view .LVU52
 229 0010 F0B1     		cbz	r0, .L21
 152:Core/Src/main.c ****   {
 153:Core/Src/main.c ****     HAL_GPIO_WritePin(DIR_TMC1_GPIO_Port, DIR_TMC1_Pin, kierunek);
 154:Core/Src/main.c ****     
 155:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_2, 2500);
 156:Core/Src/main.c ****     
 157:Core/Src/main.c ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_2);
 158:Core/Src/main.c **** 
 159:Core/Src/main.c ****     PWM_steering_period(kat_to_steps(kat));
 160:Core/Src/main.c **** 
 161:Core/Src/main.c ****     HAL_TIM_PWM_Stop(&htim1, TIM_CHANNEL_2);
 162:Core/Src/main.c **** 
 163:Core/Src/main.c ****   }
 164:Core/Src/main.c ****   else if (strncmp(ktory_silnik, silnik_CP, 2) == 0)
 230              		.loc 1 164 8 is_stmt 1 view .LVU53
 231              		.loc 1 164 12 is_stmt 0 view .LVU54
 232 0012 0222     		movs	r2, #2
 233 0014 1D49     		ldr	r1, .L22+4
 234 0016 2046     		mov	r0, r4
 235 0018 FFF7FEFF 		bl	strncmp
 236              	.LVL23:
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 8


 237              		.loc 1 164 11 view .LVU55
 238 001c B8B9     		cbnz	r0, .L15
 165:Core/Src/main.c ****   {
 166:Core/Src/main.c ****     if (kierunek == 0)
 239              		.loc 1 166 5 is_stmt 1 view .LVU56
 240              		.loc 1 166 8 is_stmt 0 view .LVU57
 241 001e 8DBB     		cbnz	r5, .L19
 167:Core/Src/main.c ****     kierunek = 1;
 242              		.loc 1 167 14 view .LVU58
 243 0020 0122     		movs	r2, #1
 244              	.L18:
 245              	.LVL24:
 168:Core/Src/main.c ****     else
 169:Core/Src/main.c ****     kierunek = 0;
 170:Core/Src/main.c ****     
 171:Core/Src/main.c ****     HAL_GPIO_WritePin(DIR_TMC2_GPIO_Port, DIR_TMC2_Pin, kierunek);
 246              		.loc 1 171 5 is_stmt 1 view .LVU59
 247 0022 0221     		movs	r1, #2
 248 0024 1A48     		ldr	r0, .L22+8
 249 0026 FFF7FEFF 		bl	HAL_GPIO_WritePin
 250              	.LVL25:
 172:Core/Src/main.c ****     
 173:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim20, TIM_CHANNEL_1, 2500);
 251              		.loc 1 173 5 view .LVU60
 252 002a 1A4C     		ldr	r4, .L22+12
 253              	.LVL26:
 254              		.loc 1 173 5 is_stmt 0 view .LVU61
 255 002c 2368     		ldr	r3, [r4]
 256 002e 40F6C412 		movw	r2, #2500
 257 0032 5A63     		str	r2, [r3, #52]
 174:Core/Src/main.c ****     
 175:Core/Src/main.c ****     HAL_TIM_PWM_Start(&htim20, TIM_CHANNEL_1);
 258              		.loc 1 175 5 is_stmt 1 view .LVU62
 259 0034 0021     		movs	r1, #0
 260 0036 2046     		mov	r0, r4
 261 0038 FFF7FEFF 		bl	HAL_TIM_PWM_Start
 262              	.LVL27:
 176:Core/Src/main.c ****   
 177:Core/Src/main.c ****     PWM_steering_period(kat_to_steps(kat));
 263              		.loc 1 177 5 view .LVU63
 264 003c 3046     		mov	r0, r6
 265 003e FFF7FEFF 		bl	kat_to_steps
 266              	.LVL28:
 267 0042 FFF7FEFF 		bl	PWM_steering_period
 268              	.LVL29:
 178:Core/Src/main.c **** 
 179:Core/Src/main.c ****     HAL_TIM_PWM_Stop(&htim20, TIM_CHANNEL_1);
 269              		.loc 1 179 5 view .LVU64
 270 0046 0021     		movs	r1, #0
 271 0048 2046     		mov	r0, r4
 272 004a FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 273              	.LVL30:
 274              	.L15:
 180:Core/Src/main.c ****   }
 181:Core/Src/main.c ****   
 182:Core/Src/main.c **** }
 275              		.loc 1 182 1 is_stmt 0 view .LVU65
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 9


 276 004e 70BD     		pop	{r4, r5, r6, pc}
 277              	.LVL31:
 278              	.L21:
 153:Core/Src/main.c ****     
 279              		.loc 1 153 5 is_stmt 1 view .LVU66
 280 0050 2A46     		mov	r2, r5
 281 0052 4FF48071 		mov	r1, #256
 282 0056 4FF09040 		mov	r0, #1207959552
 283 005a FFF7FEFF 		bl	HAL_GPIO_WritePin
 284              	.LVL32:
 155:Core/Src/main.c ****     
 285              		.loc 1 155 5 view .LVU67
 286 005e 0E4C     		ldr	r4, .L22+16
 287              	.LVL33:
 155:Core/Src/main.c ****     
 288              		.loc 1 155 5 is_stmt 0 view .LVU68
 289 0060 2368     		ldr	r3, [r4]
 290 0062 40F6C412 		movw	r2, #2500
 291 0066 9A63     		str	r2, [r3, #56]
 157:Core/Src/main.c **** 
 292              		.loc 1 157 5 is_stmt 1 view .LVU69
 293 0068 0421     		movs	r1, #4
 294 006a 2046     		mov	r0, r4
 295 006c FFF7FEFF 		bl	HAL_TIM_PWM_Start
 296              	.LVL34:
 159:Core/Src/main.c **** 
 297              		.loc 1 159 5 view .LVU70
 298 0070 3046     		mov	r0, r6
 299 0072 FFF7FEFF 		bl	kat_to_steps
 300              	.LVL35:
 301 0076 FFF7FEFF 		bl	PWM_steering_period
 302              	.LVL36:
 161:Core/Src/main.c **** 
 303              		.loc 1 161 5 view .LVU71
 304 007a 0421     		movs	r1, #4
 305 007c 2046     		mov	r0, r4
 306 007e FFF7FEFF 		bl	HAL_TIM_PWM_Stop
 307              	.LVL37:
 308 0082 E4E7     		b	.L15
 309              	.LVL38:
 310              	.L19:
 169:Core/Src/main.c ****     
 311              		.loc 1 169 14 is_stmt 0 view .LVU72
 312 0084 0022     		movs	r2, #0
 313 0086 CCE7     		b	.L18
 314              	.L23:
 315              		.align	2
 316              	.L22:
 317 0088 00000000 		.word	.LANCHOR1
 318 008c 00000000 		.word	.LANCHOR2
 319 0090 00040048 		.word	1207960576
 320 0094 00000000 		.word	htim20
 321 0098 00000000 		.word	htim1
 322              		.cfi_endproc
 323              	.LFE138:
 325              		.section	.text.CheckAngle,"ax",%progbits
 326              		.align	1
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 10


 327              		.global	CheckAngle
 328              		.syntax unified
 329              		.thumb
 330              		.thumb_func
 332              	CheckAngle:
 333              	.LVL39:
 334              	.LFB139:
 183:Core/Src/main.c **** 
 184:Core/Src/main.c **** uint16_t CheckAngle(uint16_t FirstAngle, uint16_t SecondAngle, uint16_t Angle, uint8_t Direction)
 185:Core/Src/main.c **** {
 335              		.loc 1 185 1 is_stmt 1 view -0
 336              		.cfi_startproc
 337              		@ args = 0, pretend = 0, frame = 0
 338              		@ frame_needed = 0, uses_anonymous_args = 0
 339              		.loc 1 185 1 is_stmt 0 view .LVU74
 340 0000 10B5     		push	{r4, lr}
 341              	.LCFI2:
 342              		.cfi_def_cfa_offset 8
 343              		.cfi_offset 4, -8
 344              		.cfi_offset 14, -4
 186:Core/Src/main.c ****   uint16_t angle_difference = 0;
 345              		.loc 1 186 3 is_stmt 1 view .LVU75
 346              	.LVL40:
 187:Core/Src/main.c ****   if (Direction == 0)
 347              		.loc 1 187 3 view .LVU76
 348              		.loc 1 187 6 is_stmt 0 view .LVU77
 349 0002 33B9     		cbnz	r3, .L25
 188:Core/Src/main.c ****   {
 189:Core/Src/main.c ****     angle_difference = SecondAngle - FirstAngle;
 350              		.loc 1 189 5 is_stmt 1 view .LVU78
 351              		.loc 1 189 22 is_stmt 0 view .LVU79
 352 0004 091A     		subs	r1, r1, r0
 353              	.LVL41:
 354              		.loc 1 189 22 view .LVU80
 355 0006 8CB2     		uxth	r4, r1
 356              	.LVL42:
 357              	.L26:
 190:Core/Src/main.c ****   }
 191:Core/Src/main.c ****   else if (Direction == 1)
 192:Core/Src/main.c ****   {
 193:Core/Src/main.c ****     angle_difference = FirstAngle - SecondAngle;
 194:Core/Src/main.c ****   }
 195:Core/Src/main.c **** 
 196:Core/Src/main.c ****   HAL_Delay(50);
 358              		.loc 1 196 3 is_stmt 1 view .LVU81
 359 0008 3220     		movs	r0, #50
 360              	.LVL43:
 361              		.loc 1 196 3 is_stmt 0 view .LVU82
 362 000a FFF7FEFF 		bl	HAL_Delay
 363              	.LVL44:
 197:Core/Src/main.c ****   return angle_difference;
 364              		.loc 1 197 3 is_stmt 1 view .LVU83
 198:Core/Src/main.c **** 
 199:Core/Src/main.c **** }
 365              		.loc 1 199 1 is_stmt 0 view .LVU84
 366 000e 2046     		mov	r0, r4
 367 0010 10BD     		pop	{r4, pc}
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 11


 368              	.LVL45:
 369              	.L25:
 191:Core/Src/main.c ****   {
 370              		.loc 1 191 8 is_stmt 1 view .LVU85
 191:Core/Src/main.c ****   {
 371              		.loc 1 191 11 is_stmt 0 view .LVU86
 372 0012 012B     		cmp	r3, #1
 373 0014 01D0     		beq	.L29
 186:Core/Src/main.c ****   if (Direction == 0)
 374              		.loc 1 186 12 view .LVU87
 375 0016 0024     		movs	r4, #0
 376 0018 F6E7     		b	.L26
 377              	.L29:
 193:Core/Src/main.c ****   }
 378              		.loc 1 193 5 is_stmt 1 view .LVU88
 193:Core/Src/main.c ****   }
 379              		.loc 1 193 22 is_stmt 0 view .LVU89
 380 001a 411A     		subs	r1, r0, r1
 381              	.LVL46:
 193:Core/Src/main.c ****   }
 382              		.loc 1 193 22 view .LVU90
 383 001c 8CB2     		uxth	r4, r1
 384              	.LVL47:
 193:Core/Src/main.c ****   }
 385              		.loc 1 193 22 view .LVU91
 386 001e F3E7     		b	.L26
 387              		.cfi_endproc
 388              	.LFE139:
 390              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 391              		.align	1
 392              		.global	HAL_UART_RxCpltCallback
 393              		.syntax unified
 394              		.thumb
 395              		.thumb_func
 397              	HAL_UART_RxCpltCallback:
 398              	.LVL48:
 399              	.LFB140:
 200:Core/Src/main.c **** 
 201:Core/Src/main.c **** 
 202:Core/Src/main.c **** 
 203:Core/Src/main.c **** 
 204:Core/Src/main.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *huart)
 205:Core/Src/main.c **** {
 400              		.loc 1 205 1 is_stmt 1 view -0
 401              		.cfi_startproc
 402              		@ args = 0, pretend = 0, frame = 0
 403              		@ frame_needed = 0, uses_anonymous_args = 0
 404              		.loc 1 205 1 is_stmt 0 view .LVU93
 405 0000 08B5     		push	{r3, lr}
 406              	.LCFI3:
 407              		.cfi_def_cfa_offset 8
 408              		.cfi_offset 3, -8
 409              		.cfi_offset 14, -4
 206:Core/Src/main.c ****   uint8_t Data[40];
 410              		.loc 1 206 3 is_stmt 1 view .LVU94
 207:Core/Src/main.c ****   uint16_t size = 0;
 411              		.loc 1 207 3 view .LVU95
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 12


 412              	.LVL49:
 208:Core/Src/main.c **** 
 209:Core/Src/main.c ****   czy_przerwanie = !czy_przerwanie;
 413              		.loc 1 209 3 view .LVU96
 414 0002 054A     		ldr	r2, .L32
 415 0004 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 416 0006 83F00103 		eor	r3, r3, #1
 417              		.loc 1 209 18 is_stmt 0 view .LVU97
 418 000a 1370     		strb	r3, [r2]
 210:Core/Src/main.c **** 
 211:Core/Src/main.c ****   // dalsze nasluchiwanie UART
 212:Core/Src/main.c ****   HAL_UART_Receive_IT(&huart2, data, 6);
 419              		.loc 1 212 3 is_stmt 1 view .LVU98
 420 000c 0622     		movs	r2, #6
 421 000e 0349     		ldr	r1, .L32+4
 422 0010 0348     		ldr	r0, .L32+8
 423              	.LVL50:
 424              		.loc 1 212 3 is_stmt 0 view .LVU99
 425 0012 FFF7FEFF 		bl	HAL_UART_Receive_IT
 426              	.LVL51:
 213:Core/Src/main.c **** }
 427              		.loc 1 213 1 view .LVU100
 428 0016 08BD     		pop	{r3, pc}
 429              	.L33:
 430              		.align	2
 431              	.L32:
 432 0018 00000000 		.word	.LANCHOR3
 433 001c 00000000 		.word	.LANCHOR4
 434 0020 00000000 		.word	huart2
 435              		.cfi_endproc
 436              	.LFE140:
 438              		.section	.text.HallSensorSettings,"ax",%progbits
 439              		.align	1
 440              		.global	HallSensorSettings
 441              		.syntax unified
 442              		.thumb
 443              		.thumb_func
 445              	HallSensorSettings:
 446              	.LFB141:
 214:Core/Src/main.c **** 
 215:Core/Src/main.c **** 
 216:Core/Src/main.c **** void HallSensorSettings(void)
 217:Core/Src/main.c **** {
 447              		.loc 1 217 1 is_stmt 1 view -0
 448              		.cfi_startproc
 449              		@ args = 0, pretend = 0, frame = 40
 450              		@ frame_needed = 0, uses_anonymous_args = 0
 451 0000 00B5     		push	{lr}
 452              	.LCFI4:
 453              		.cfi_def_cfa_offset 4
 454              		.cfi_offset 14, -4
 455 0002 8BB0     		sub	sp, sp, #44
 456              	.LCFI5:
 457              		.cfi_def_cfa_offset 48
 218:Core/Src/main.c ****   TMAG5170_DEVICE_CONFIG_settings_t DevSettings;
 458              		.loc 1 218 3 view .LVU102
 219:Core/Src/main.c ****   DevSettings.ConvAvg = TMAG5170_CONV_AVG_1x;
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 13


 459              		.loc 1 219 3 view .LVU103
 460              		.loc 1 219 23 is_stmt 0 view .LVU104
 461 0004 0023     		movs	r3, #0
 462 0006 8DF82030 		strb	r3, [sp, #32]
 220:Core/Src/main.c ****   DevSettings.MagTempCoef = TMAG5170_MAG_TEMPCO_0;
 463              		.loc 1 220 3 is_stmt 1 view .LVU105
 464              		.loc 1 220 27 is_stmt 0 view .LVU106
 465 000a 8DF82130 		strb	r3, [sp, #33]
 221:Core/Src/main.c ****   DevSettings.OperatingMode = TMAG5170_OPERATING_MODE_ConfigurationMode;
 466              		.loc 1 221 3 is_stmt 1 view .LVU107
 467              		.loc 1 221 29 is_stmt 0 view .LVU108
 468 000e 8DF82230 		strb	r3, [sp, #34]
 222:Core/Src/main.c ****   DevSettings.TempChannelEnabled = TMAG5170_T_CH_EN_TempChannelEnabled; 
 469              		.loc 1 222 3 is_stmt 1 view .LVU109
 470              		.loc 1 222 34 is_stmt 0 view .LVU110
 471 0012 0122     		movs	r2, #1
 472 0014 8DF82320 		strb	r2, [sp, #35]
 223:Core/Src/main.c ****   DevSettings.TempRate = TMAG5170_T_RATE_sameAsOtherSensors;
 473              		.loc 1 223 3 is_stmt 1 view .LVU111
 474              		.loc 1 223 24 is_stmt 0 view .LVU112
 475 0018 8DF82430 		strb	r3, [sp, #36]
 224:Core/Src/main.c ****   DevSettings.TempChannelEnabled = TMAG5170_T_HLT_EN_tempLimitCheckOff;
 476              		.loc 1 224 3 is_stmt 1 view .LVU113
 477              		.loc 1 224 34 is_stmt 0 view .LVU114
 478 001c 8DF82330 		strb	r3, [sp, #35]
 225:Core/Src/main.c **** 
 226:Core/Src/main.c ****   
 227:Core/Src/main.c ****   TMAG5170_SENSOR_CONFIG_settings_t SensSettings;
 479              		.loc 1 227 3 is_stmt 1 view .LVU115
 228:Core/Src/main.c ****   SensSettings.AngleEnabled = TMAG5170_ANGLE_EN_X_Y;
 480              		.loc 1 228 3 view .LVU116
 481              		.loc 1 228 29 is_stmt 0 view .LVU117
 482 0020 8DF81820 		strb	r2, [sp, #24]
 229:Core/Src/main.c ****   SensSettings.SleepTime = TMAG5170_SLEEPTIME_1ms;
 483              		.loc 1 229 3 is_stmt 1 view .LVU118
 484              		.loc 1 229 26 is_stmt 0 view .LVU119
 485 0024 8DF81930 		strb	r3, [sp, #25]
 230:Core/Src/main.c ****   SensSettings.MagChannelEnabled = TMAG5170_MAG_CH_EN_XY;
 486              		.loc 1 230 3 is_stmt 1 view .LVU120
 487              		.loc 1 230 34 is_stmt 0 view .LVU121
 488 0028 0321     		movs	r1, #3
 489 002a 8DF81A10 		strb	r1, [sp, #26]
 231:Core/Src/main.c ****   SensSettings.Zrange = TMAG5170_Z_RANGE_50mT;
 490              		.loc 1 231 3 is_stmt 1 view .LVU122
 491              		.loc 1 231 23 is_stmt 0 view .LVU123
 492 002e 8DF81B30 		strb	r3, [sp, #27]
 232:Core/Src/main.c ****   SensSettings.Yrange = TMAG5170_Y_RANGE_50mT;
 493              		.loc 1 232 3 is_stmt 1 view .LVU124
 494              		.loc 1 232 23 is_stmt 0 view .LVU125
 495 0032 8DF81C30 		strb	r3, [sp, #28]
 233:Core/Src/main.c ****   SensSettings.Xrange = TMAG5170_X_RANGE_50mT;
 496              		.loc 1 233 3 is_stmt 1 view .LVU126
 497              		.loc 1 233 23 is_stmt 0 view .LVU127
 498 0036 8DF81D30 		strb	r3, [sp, #29]
 234:Core/Src/main.c **** 
 235:Core/Src/main.c **** 
 236:Core/Src/main.c ****   TMAG5170_SYSTEM_CONFIG_settings_t SystemSettings;
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 14


 499              		.loc 1 236 3 is_stmt 1 view .LVU128
 237:Core/Src/main.c ****   SystemSettings.DiagnosticSelect = TMAG5170_DIAG_SEL_AllDataPathTogether;
 500              		.loc 1 237 3 view .LVU129
 501              		.loc 1 237 35 is_stmt 0 view .LVU130
 502 003a 8DF81030 		strb	r3, [sp, #16]
 238:Core/Src/main.c ****   SystemSettings.TriggerMode = TMAG5170_TRIGGER_MODE_nCSpulse;
 503              		.loc 1 238 3 is_stmt 1 view .LVU131
 504              		.loc 1 238 30 is_stmt 0 view .LVU132
 505 003e 8DF81120 		strb	r2, [sp, #17]
 239:Core/Src/main.c ****   SystemSettings.DataType = TMAG5170_DATA_TYPE_32bit;
 506              		.loc 1 239 3 is_stmt 1 view .LVU133
 507              		.loc 1 239 27 is_stmt 0 view .LVU134
 508 0042 8DF81230 		strb	r3, [sp, #18]
 240:Core/Src/main.c ****   SystemSettings.DiagnosticEnabled = TMAG5170_DIAG_EN_AFEdiagnosticsDisabled;
 509              		.loc 1 240 3 is_stmt 1 view .LVU135
 510              		.loc 1 240 36 is_stmt 0 view .LVU136
 511 0046 8DF81330 		strb	r3, [sp, #19]
 241:Core/Src/main.c ****   SystemSettings.ZlimitCheck = TMAG5170_Z_HLT_EN_ZaxisLimitCheckOff;
 512              		.loc 1 241 3 is_stmt 1 view .LVU137
 513              		.loc 1 241 30 is_stmt 0 view .LVU138
 514 004a 8DF81430 		strb	r3, [sp, #20]
 242:Core/Src/main.c ****   SystemSettings.YlimitCheck = TMAG5170_Y_HLT_EN_YaxisLimitCheckOff;
 515              		.loc 1 242 3 is_stmt 1 view .LVU139
 516              		.loc 1 242 30 is_stmt 0 view .LVU140
 517 004e 8DF81530 		strb	r3, [sp, #21]
 243:Core/Src/main.c ****   SystemSettings.XlimitCheck = TMAG5170_X_HLT_EN_XaxisLimitCheckOff;
 518              		.loc 1 243 3 is_stmt 1 view .LVU141
 519              		.loc 1 243 30 is_stmt 0 view .LVU142
 520 0052 8DF81630 		strb	r3, [sp, #22]
 244:Core/Src/main.c **** 
 245:Core/Src/main.c **** 
 246:Core/Src/main.c ****   TMAG5170_ALERT_CONFIG_settings_t AlertSettings;
 521              		.loc 1 246 3 is_stmt 1 view .LVU143
 247:Core/Src/main.c ****   AlertSettings.AlertStatus = TMAG5170_STATUS_ALRT_IsAsserted;
 522              		.loc 1 247 3 view .LVU144
 523              		.loc 1 247 29 is_stmt 0 view .LVU145
 524 0056 8DF80620 		strb	r2, [sp, #6]
 248:Core/Src/main.c **** 
 249:Core/Src/main.c ****   DisableCRC();
 525              		.loc 1 249 3 is_stmt 1 view .LVU146
 526 005a FFF7FEFF 		bl	DisableCRC
 527              	.LVL52:
 250:Core/Src/main.c ****   TMAG5170_dev_conf_settings(&DevSettings);
 528              		.loc 1 250 3 view .LVU147
 529 005e 08A8     		add	r0, sp, #32
 530 0060 FFF7FEFF 		bl	TMAG5170_dev_conf_settings
 531              	.LVL53:
 251:Core/Src/main.c ****   TMAG5170_sens_conf_settings(&SensSettings);
 532              		.loc 1 251 3 view .LVU148
 533 0064 06A8     		add	r0, sp, #24
 534 0066 FFF7FEFF 		bl	TMAG5170_sens_conf_settings
 535              	.LVL54:
 252:Core/Src/main.c ****   TMAG5170_sys_conf_settings(&SystemSettings);
 536              		.loc 1 252 3 view .LVU149
 537 006a 04A8     		add	r0, sp, #16
 538 006c FFF7FEFF 		bl	TMAG5170_sys_conf_settings
 539              	.LVL55:
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 15


 253:Core/Src/main.c ****   TMAG5170_al_conf_settings(&AlertSettings);
 540              		.loc 1 253 3 view .LVU150
 541 0070 01A8     		add	r0, sp, #4
 542 0072 FFF7FEFF 		bl	TMAG5170_al_conf_settings
 543              	.LVL56:
 254:Core/Src/main.c **** 
 255:Core/Src/main.c ****   
 256:Core/Src/main.c **** }
 544              		.loc 1 256 1 is_stmt 0 view .LVU151
 545 0076 0BB0     		add	sp, sp, #44
 546              	.LCFI6:
 547              		.cfi_def_cfa_offset 4
 548              		@ sp needed
 549 0078 5DF804FB 		ldr	pc, [sp], #4
 550              		.cfi_endproc
 551              	.LFE141:
 553              		.section	.rodata.DisplayAngle.str1.4,"aMS",%progbits,1
 554              		.align	2
 555              	.LC0:
 556 0000 416E676C 		.ascii	"Angle: \000"
 556      653A2000 
 557              		.align	2
 558              	.LC1:
 559 0008 256400   		.ascii	"%d\000"
 560 000b 00       		.align	2
 561              	.LC2:
 562 000c 2C00     		.ascii	",\000"
 563 000e 0000     		.align	2
 564              	.LC3:
 565 0010 0D0A00   		.ascii	"\015\012\000"
 566              		.section	.text.DisplayAngle,"ax",%progbits
 567              		.align	1
 568              		.global	DisplayAngle
 569              		.syntax unified
 570              		.thumb
 571              		.thumb_func
 573              	DisplayAngle:
 574              	.LFB142:
 257:Core/Src/main.c **** 
 258:Core/Src/main.c **** void DisplayAngle(void)
 259:Core/Src/main.c **** {
 575              		.loc 1 259 1 is_stmt 1 view -0
 576              		.cfi_startproc
 577              		@ args = 0, pretend = 0, frame = 16
 578              		@ frame_needed = 0, uses_anonymous_args = 0
 579 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 580              	.LCFI7:
 581              		.cfi_def_cfa_offset 20
 582              		.cfi_offset 4, -20
 583              		.cfi_offset 5, -16
 584              		.cfi_offset 6, -12
 585              		.cfi_offset 7, -8
 586              		.cfi_offset 14, -4
 587 0002 85B0     		sub	sp, sp, #20
 588              	.LCFI8:
 589              		.cfi_def_cfa_offset 40
 260:Core/Src/main.c ****   float Angle;
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 16


 590              		.loc 1 260 3 view .LVU153
 261:Core/Src/main.c ****   uint16_t AngleInt = 0;
 591              		.loc 1 261 3 view .LVU154
 592              	.LVL57:
 262:Core/Src/main.c ****   uint16_t AngleInt100 = 0;
 593              		.loc 1 262 3 view .LVU155
 263:Core/Src/main.c **** 
 264:Core/Src/main.c ****   Angle = Angle + GetAngle();
 594              		.loc 1 264 3 view .LVU156
 595              		.loc 1 264 19 is_stmt 0 view .LVU157
 596 0004 FFF7FEFF 		bl	GetAngle
 597              	.LVL58:
 598              		.loc 1 264 9 view .LVU158
 599 0008 DFED287A 		vldr.32	s15, .L38
 600 000c 30EE270A 		vadd.f32	s0, s0, s15
 601              	.LVL59:
 265:Core/Src/main.c **** 
 266:Core/Src/main.c ****   
 267:Core/Src/main.c ****   AngleInt = (uint16_t)Angle;
 602              		.loc 1 267 3 is_stmt 1 view .LVU159
 603              		.loc 1 267 12 is_stmt 0 view .LVU160
 604 0010 FCEEC07A 		vcvt.u32.f32	s15, s0
 605 0014 17EE903A 		vmov	r3, s15	@ int
 606 0018 9EB2     		uxth	r6, r3
 607              	.LVL60:
 268:Core/Src/main.c **** 
 269:Core/Src/main.c ****   Angle = Angle*100 - AngleInt*100;
 608              		.loc 1 269 3 is_stmt 1 view .LVU161
 609              		.loc 1 269 16 is_stmt 0 view .LVU162
 610 001a DFED257A 		vldr.32	s15, .L38+4
 611 001e 60EE277A 		vmul.f32	s15, s0, s15
 612              		.loc 1 269 31 view .LVU163
 613 0022 6423     		movs	r3, #100
 614 0024 03FB06F3 		mul	r3, r3, r6
 615 0028 00EE103A 		vmov	s0, r3	@ int
 616              	.LVL61:
 617              		.loc 1 269 21 view .LVU164
 618 002c B8EEC00A 		vcvt.f32.s32	s0, s0
 619              		.loc 1 269 9 view .LVU165
 620 0030 37EEC00A 		vsub.f32	s0, s15, s0
 621              	.LVL62:
 270:Core/Src/main.c **** 
 271:Core/Src/main.c ****   AngleInt100 = (uint16_t)Angle;
 622              		.loc 1 271 3 is_stmt 1 view .LVU166
 623              		.loc 1 271 15 is_stmt 0 view .LVU167
 624 0034 BCEEC00A 		vcvt.u32.f32	s0, s0
 625              	.LVL63:
 626              		.loc 1 271 15 view .LVU168
 627 0038 10EE103A 		vmov	r3, s0	@ int
 628              	.LVL64:
 629              		.loc 1 271 15 view .LVU169
 630 003c 9CB2     		uxth	r4, r3
 631              	.LVL65:
 272:Core/Src/main.c ****   
 273:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, "Angle: ", strlen("Angle: "), HAL_MAX_DELAY);
 632              		.loc 1 273 3 is_stmt 1 view .LVU170
 633 003e 1D4D     		ldr	r5, .L38+8
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 17


 634 0040 4FF0FF33 		mov	r3, #-1
 635 0044 0722     		movs	r2, #7
 636 0046 1C49     		ldr	r1, .L38+12
 637 0048 2846     		mov	r0, r5
 638 004a FFF7FEFF 		bl	HAL_UART_Transmit
 639              	.LVL66:
 274:Core/Src/main.c ****   char str1[8];
 640              		.loc 1 274 3 view .LVU171
 275:Core/Src/main.c ****   sprintf(str1, "%d", AngleInt);
 641              		.loc 1 275 3 view .LVU172
 642 004e 1B4F     		ldr	r7, .L38+16
 643 0050 3246     		mov	r2, r6
 644 0052 3946     		mov	r1, r7
 645 0054 02A8     		add	r0, sp, #8
 646 0056 FFF7FEFF 		bl	sprintf
 647              	.LVL67:
 276:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, str1, strlen(str1), HAL_MAX_DELAY);
 648              		.loc 1 276 3 view .LVU173
 649              		.loc 1 276 36 is_stmt 0 view .LVU174
 650 005a 02A8     		add	r0, sp, #8
 651 005c FFF7FEFF 		bl	strlen
 652              	.LVL68:
 653              		.loc 1 276 3 view .LVU175
 654 0060 4FF0FF33 		mov	r3, #-1
 655 0064 82B2     		uxth	r2, r0
 656 0066 02A9     		add	r1, sp, #8
 657 0068 2846     		mov	r0, r5
 658 006a FFF7FEFF 		bl	HAL_UART_Transmit
 659              	.LVL69:
 277:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, ",", strlen(","), HAL_MAX_DELAY);
 660              		.loc 1 277 3 is_stmt 1 view .LVU176
 661 006e 4FF0FF33 		mov	r3, #-1
 662 0072 0122     		movs	r2, #1
 663 0074 1249     		ldr	r1, .L38+20
 664 0076 2846     		mov	r0, r5
 665 0078 FFF7FEFF 		bl	HAL_UART_Transmit
 666              	.LVL70:
 278:Core/Src/main.c ****   char str2[8];
 667              		.loc 1 278 3 view .LVU177
 279:Core/Src/main.c ****   sprintf(str2, "%d", AngleInt100);
 668              		.loc 1 279 3 view .LVU178
 669 007c 2246     		mov	r2, r4
 670 007e 3946     		mov	r1, r7
 671 0080 6846     		mov	r0, sp
 672 0082 FFF7FEFF 		bl	sprintf
 673              	.LVL71:
 280:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, str2, strlen(str2), HAL_MAX_DELAY);
 674              		.loc 1 280 3 view .LVU179
 675              		.loc 1 280 36 is_stmt 0 view .LVU180
 676 0086 6846     		mov	r0, sp
 677 0088 FFF7FEFF 		bl	strlen
 678              	.LVL72:
 679              		.loc 1 280 3 view .LVU181
 680 008c 4FF0FF33 		mov	r3, #-1
 681 0090 82B2     		uxth	r2, r0
 682 0092 6946     		mov	r1, sp
 683 0094 2846     		mov	r0, r5
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 18


 684 0096 FFF7FEFF 		bl	HAL_UART_Transmit
 685              	.LVL73:
 281:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, (uint8_t*)"\r\n", strlen("\r\n"), HAL_MAX_DELAY);
 686              		.loc 1 281 3 is_stmt 1 view .LVU182
 687 009a 4FF0FF33 		mov	r3, #-1
 688 009e 0222     		movs	r2, #2
 689 00a0 0849     		ldr	r1, .L38+24
 690 00a2 2846     		mov	r0, r5
 691 00a4 FFF7FEFF 		bl	HAL_UART_Transmit
 692              	.LVL74:
 282:Core/Src/main.c **** 
 283:Core/Src/main.c **** }
 693              		.loc 1 283 1 is_stmt 0 view .LVU183
 694 00a8 05B0     		add	sp, sp, #20
 695              	.LCFI9:
 696              		.cfi_def_cfa_offset 20
 697              		@ sp needed
 698 00aa F0BD     		pop	{r4, r5, r6, r7, pc}
 699              	.LVL75:
 700              	.L39:
 701              		.loc 1 283 1 view .LVU184
 702              		.align	2
 703              	.L38:
 704 00ac 00000000 		.word	0
 705 00b0 0000C842 		.word	1120403456
 706 00b4 00000000 		.word	huart2
 707 00b8 00000000 		.word	.LC0
 708 00bc 08000000 		.word	.LC1
 709 00c0 0C000000 		.word	.LC2
 710 00c4 10000000 		.word	.LC3
 711              		.cfi_endproc
 712              	.LFE142:
 714              		.section	.text.Error_Handler,"ax",%progbits
 715              		.align	1
 716              		.global	Error_Handler
 717              		.syntax unified
 718              		.thumb
 719              		.thumb_func
 721              	Error_Handler:
 722              	.LFB145:
 284:Core/Src/main.c **** /* USER CODE END PFP */
 285:Core/Src/main.c **** 
 286:Core/Src/main.c **** /* Private user code ---------------------------------------------------------*/
 287:Core/Src/main.c **** /* USER CODE BEGIN 0 */
 288:Core/Src/main.c **** 
 289:Core/Src/main.c **** /* USER CODE END 0 */
 290:Core/Src/main.c **** 
 291:Core/Src/main.c **** /**
 292:Core/Src/main.c ****   * @brief  The application entry point.
 293:Core/Src/main.c ****   * @retval int
 294:Core/Src/main.c ****   */
 295:Core/Src/main.c **** int main(void)
 296:Core/Src/main.c **** {
 297:Core/Src/main.c ****   /* USER CODE BEGIN 1 */
 298:Core/Src/main.c ****   /* USER CODE END 1 */
 299:Core/Src/main.c **** 
 300:Core/Src/main.c ****   /* MCU Configuration--------------------------------------------------------*/
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 19


 301:Core/Src/main.c **** 
 302:Core/Src/main.c ****   /* Reset of all peripherals, Initializes the Flash interface and the Systick. */
 303:Core/Src/main.c ****   HAL_Init();
 304:Core/Src/main.c **** 
 305:Core/Src/main.c ****   /* USER CODE BEGIN Init */
 306:Core/Src/main.c **** 
 307:Core/Src/main.c ****   /* USER CODE END Init */
 308:Core/Src/main.c **** 
 309:Core/Src/main.c ****   /* Configure the system clock */
 310:Core/Src/main.c ****   SystemClock_Config();
 311:Core/Src/main.c **** 
 312:Core/Src/main.c ****   /* USER CODE BEGIN SysInit */
 313:Core/Src/main.c **** 
 314:Core/Src/main.c ****   /* USER CODE END SysInit */
 315:Core/Src/main.c **** 
 316:Core/Src/main.c ****   /* Initialize all configured peripherals */
 317:Core/Src/main.c ****   MX_GPIO_Init();
 318:Core/Src/main.c ****   MX_TIM1_Init();
 319:Core/Src/main.c ****   MX_USART2_UART_Init();
 320:Core/Src/main.c ****   MX_UART4_Init();
 321:Core/Src/main.c ****   MX_SPI1_Init();
 322:Core/Src/main.c ****   MX_TIM20_Init();
 323:Core/Src/main.c ****   /* USER CODE BEGIN 2 */
 324:Core/Src/main.c **** 
 325:Core/Src/main.c ****   // TMAG5170 configuration
 326:Core/Src/main.c ****   HallSensorSettings();
 327:Core/Src/main.c **** 
 328:Core/Src/main.c **** 
 329:Core/Src/main.c ****   HAL_UART_Receive_IT(&huart2, data, 6);
 330:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, (uint8_t*)"sterownik silnikami\r\n", strlen("sterownik silnikami\r\n")
 331:Core/Src/main.c ****   /* USER CODE END 2 */
 332:Core/Src/main.c **** 
 333:Core/Src/main.c **** 
 334:Core/Src/main.c **** 
 335:Core/Src/main.c ****   /* Infinite loop */
 336:Core/Src/main.c ****   /* USER CODE BEGIN WHILE */
 337:Core/Src/main.c ****   while (1)
 338:Core/Src/main.c ****   {
 339:Core/Src/main.c ****     /* USER CODE END WHILE */
 340:Core/Src/main.c **** 
 341:Core/Src/main.c ****     /* USER CODE BEGIN 3 */
 342:Core/Src/main.c **** 
 343:Core/Src/main.c **** 
 344:Core/Src/main.c ****   if(czy_przerwanie != old_czy_przerwanie)
 345:Core/Src/main.c ****   {
 346:Core/Src/main.c **** 
 347:Core/Src/main.c ****     old_czy_przerwanie = !old_czy_przerwanie;
 348:Core/Src/main.c ****     odczyt_kierunku(data);
 349:Core/Src/main.c **** 
 350:Core/Src/main.c ****     strncpy(silnik, data, 2);
 351:Core/Src/main.c ****     strncpy(kat_obrotu, data + 3, 3);
 352:Core/Src/main.c ****     uint16_t kat_obrotu_zmienna = (uint16_t)atoi(kat_obrotu);
 353:Core/Src/main.c **** 
 354:Core/Src/main.c ****     // Angle = GetAngle();
 355:Core/Src/main.c ****     // FirstAngle = Angle;
 356:Core/Src/main.c ****     // Angle = 0;
 357:Core/Src/main.c **** 
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 20


 358:Core/Src/main.c ****     HAL_Delay(50);
 359:Core/Src/main.c ****     krecenie_silnikiem(silnik, kierunek_obrotu, (uint16_t)kat_obrotu_zmienna);
 360:Core/Src/main.c ****     HAL_Delay(100);
 361:Core/Src/main.c **** 
 362:Core/Src/main.c ****     // Angle = GetAngle();
 363:Core/Src/main.c ****     // SecondAngle = Angle;
 364:Core/Src/main.c ****     // Angle = 0;
 365:Core/Src/main.c ****     AngleDifference = CheckAngle(FirstAngle, SecondAngle, kat_obrotu_zmienna, kierunek_obrotu);
 366:Core/Src/main.c **** 
 367:Core/Src/main.c **** 
 368:Core/Src/main.c ****   }
 369:Core/Src/main.c **** 
 370:Core/Src/main.c ****     DisplayAngle();
 371:Core/Src/main.c ****     HAL_Delay(1000);
 372:Core/Src/main.c **** 
 373:Core/Src/main.c **** 
 374:Core/Src/main.c ****   }
 375:Core/Src/main.c ****   /* USER CODE END 3 */
 376:Core/Src/main.c **** }
 377:Core/Src/main.c **** 
 378:Core/Src/main.c **** /**
 379:Core/Src/main.c ****   * @brief System Clock Configuration
 380:Core/Src/main.c ****   * @retval None
 381:Core/Src/main.c ****   */
 382:Core/Src/main.c **** void SystemClock_Config(void)
 383:Core/Src/main.c **** {
 384:Core/Src/main.c ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 385:Core/Src/main.c ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 386:Core/Src/main.c **** 
 387:Core/Src/main.c ****   /** Configure the main internal regulator output voltage
 388:Core/Src/main.c ****   */
 389:Core/Src/main.c ****   HAL_PWREx_ControlVoltageScaling(PWR_REGULATOR_VOLTAGE_SCALE1);
 390:Core/Src/main.c **** 
 391:Core/Src/main.c ****   /** Initializes the RCC Oscillators according to the specified parameters
 392:Core/Src/main.c ****   * in the RCC_OscInitTypeDef structure.
 393:Core/Src/main.c ****   */
 394:Core/Src/main.c ****   RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
 395:Core/Src/main.c ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 396:Core/Src/main.c ****   RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 397:Core/Src/main.c ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_NONE;
 398:Core/Src/main.c ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 399:Core/Src/main.c ****   {
 400:Core/Src/main.c ****     Error_Handler();
 401:Core/Src/main.c ****   }
 402:Core/Src/main.c **** 
 403:Core/Src/main.c ****   /** Initializes the CPU, AHB and APB buses clocks
 404:Core/Src/main.c ****   */
 405:Core/Src/main.c ****   RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK|RCC_CLOCKTYPE_SYSCLK
 406:Core/Src/main.c ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 407:Core/Src/main.c ****   RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_HSI;
 408:Core/Src/main.c ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 409:Core/Src/main.c ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 410:Core/Src/main.c ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 411:Core/Src/main.c **** 
 412:Core/Src/main.c ****   if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_0) != HAL_OK)
 413:Core/Src/main.c ****   {
 414:Core/Src/main.c ****     Error_Handler();
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 21


 415:Core/Src/main.c ****   }
 416:Core/Src/main.c **** }
 417:Core/Src/main.c **** 
 418:Core/Src/main.c **** /* USER CODE BEGIN 4 */
 419:Core/Src/main.c **** 
 420:Core/Src/main.c **** /* USER CODE END 4 */
 421:Core/Src/main.c **** 
 422:Core/Src/main.c **** /**
 423:Core/Src/main.c ****   * @brief  This function is executed in case of error occurrence.
 424:Core/Src/main.c ****   * @retval None
 425:Core/Src/main.c ****   */
 426:Core/Src/main.c **** void Error_Handler(void)
 427:Core/Src/main.c **** {
 723              		.loc 1 427 1 is_stmt 1 view -0
 724              		.cfi_startproc
 725              		@ Volatile: function does not return.
 726              		@ args = 0, pretend = 0, frame = 0
 727              		@ frame_needed = 0, uses_anonymous_args = 0
 728              		@ link register save eliminated.
 428:Core/Src/main.c ****   /* USER CODE BEGIN Error_Handler_Debug */
 429:Core/Src/main.c ****   /* User can add his own implementation to report the HAL error return state */
 430:Core/Src/main.c ****   __disable_irq();
 729              		.loc 1 430 3 view .LVU186
 730              	.LBB4:
 731              	.LBI4:
 732              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.2.0
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     08. May 2019
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2019 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 22


  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif                                           
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 23


  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __COMPILER_BARRIER
 117:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __COMPILER_BARRIER()                   __ASM volatile("":::"memory")
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 119:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 120:Drivers/CMSIS/Include/cmsis_gcc.h **** /* #########################  Startup and Lowlevel Init  ######################## */
 121:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 122:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __PROGRAM_START
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Initializes data and bss sections
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details This default implementations initialized all data and additional bss
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            sections relying on .copy.table and .zero.table specified properly
 128:Drivers/CMSIS/Include/cmsis_gcc.h ****            in the used linker script.
 129:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 130:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 131:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE __NO_RETURN void __cmsis_start(void)
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 133:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern void _start(void) __NO_RETURN;
 134:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 135:Drivers/CMSIS/Include/cmsis_gcc.h ****   typedef struct {
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t const* src;
 137:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t* dest;
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t  wlen;
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****   } __copy_table_t;
 140:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 141:Drivers/CMSIS/Include/cmsis_gcc.h ****   typedef struct {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t* dest;
 143:Drivers/CMSIS/Include/cmsis_gcc.h ****     uint32_t  wlen;
 144:Drivers/CMSIS/Include/cmsis_gcc.h ****   } __zero_table_t;
 145:Drivers/CMSIS/Include/cmsis_gcc.h ****   
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 24


 146:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_start__;
 147:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __copy_table_t __copy_table_end__;
 148:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_start__;
 149:Drivers/CMSIS/Include/cmsis_gcc.h ****   extern const __zero_table_t __zero_table_end__;
 150:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 151:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (__copy_table_t const* pTable = &__copy_table_start__; pTable < &__copy_table_end__; ++pTable
 152:Drivers/CMSIS/Include/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 153:Drivers/CMSIS/Include/cmsis_gcc.h ****       pTable->dest[i] = pTable->src[i];
 154:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 155:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 156:Drivers/CMSIS/Include/cmsis_gcc.h ****  
 157:Drivers/CMSIS/Include/cmsis_gcc.h ****   for (__zero_table_t const* pTable = &__zero_table_start__; pTable < &__zero_table_end__; ++pTable
 158:Drivers/CMSIS/Include/cmsis_gcc.h ****     for(uint32_t i=0u; i<pTable->wlen; ++i) {
 159:Drivers/CMSIS/Include/cmsis_gcc.h ****       pTable->dest[i] = 0u;
 160:Drivers/CMSIS/Include/cmsis_gcc.h ****     }
 161:Drivers/CMSIS/Include/cmsis_gcc.h ****   }
 162:Drivers/CMSIS/Include/cmsis_gcc.h ****  
 163:Drivers/CMSIS/Include/cmsis_gcc.h ****   _start();
 164:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 165:Drivers/CMSIS/Include/cmsis_gcc.h ****   
 166:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __PROGRAM_START           __cmsis_start
 167:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 168:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 169:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __INITIAL_SP
 170:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __INITIAL_SP              __StackTop
 171:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 172:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 173:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __STACK_LIMIT
 174:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __STACK_LIMIT             __StackLimit
 175:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 176:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 177:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __VECTOR_TABLE
 178:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __VECTOR_TABLE            __Vectors
 179:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 180:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 181:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __VECTOR_TABLE_ATTRIBUTE
 182:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __VECTOR_TABLE_ATTRIBUTE  __attribute((used, section(".vectors")))
 183:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 184:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 185:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 186:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 187:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 188:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 189:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 190:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 191:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 192:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 193:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 194:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 195:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 196:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 197:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 198:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 199:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 200:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 201:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 202:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 25


 203:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
 204:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 205:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 206:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 207:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 733              		.loc 2 207 27 view .LVU187
 734              	.LBB5:
 208:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 209:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 735              		.loc 2 209 3 view .LVU188
 736              		.syntax unified
 737              	@ 209 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 738 0000 72B6     		cpsid i
 739              	@ 0 "" 2
 740              		.thumb
 741              		.syntax unified
 742              	.L41:
 743              	.LBE5:
 744              	.LBE4:
 431:Core/Src/main.c ****   while (1)
 745              		.loc 1 431 3 discriminator 1 view .LVU189
 432:Core/Src/main.c ****   {
 433:Core/Src/main.c ****   }
 746              		.loc 1 433 3 discriminator 1 view .LVU190
 431:Core/Src/main.c ****   while (1)
 747              		.loc 1 431 9 discriminator 1 view .LVU191
 748 0002 FEE7     		b	.L41
 749              		.cfi_endproc
 750              	.LFE145:
 752              		.section	.text.SystemClock_Config,"ax",%progbits
 753              		.align	1
 754              		.global	SystemClock_Config
 755              		.syntax unified
 756              		.thumb
 757              		.thumb_func
 759              	SystemClock_Config:
 760              	.LFB144:
 383:Core/Src/main.c ****   RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 761              		.loc 1 383 1 view -0
 762              		.cfi_startproc
 763              		@ args = 0, pretend = 0, frame = 80
 764              		@ frame_needed = 0, uses_anonymous_args = 0
 765 0000 10B5     		push	{r4, lr}
 766              	.LCFI10:
 767              		.cfi_def_cfa_offset 8
 768              		.cfi_offset 4, -8
 769              		.cfi_offset 14, -4
 770 0002 94B0     		sub	sp, sp, #80
 771              	.LCFI11:
 772              		.cfi_def_cfa_offset 88
 384:Core/Src/main.c ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 773              		.loc 1 384 3 view .LVU193
 384:Core/Src/main.c ****   RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 774              		.loc 1 384 22 is_stmt 0 view .LVU194
 775 0004 3822     		movs	r2, #56
 776 0006 0021     		movs	r1, #0
 777 0008 06A8     		add	r0, sp, #24
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 26


 778 000a FFF7FEFF 		bl	memset
 779              	.LVL76:
 385:Core/Src/main.c **** 
 780              		.loc 1 385 3 is_stmt 1 view .LVU195
 385:Core/Src/main.c **** 
 781              		.loc 1 385 22 is_stmt 0 view .LVU196
 782 000e 0024     		movs	r4, #0
 783 0010 0194     		str	r4, [sp, #4]
 784 0012 0294     		str	r4, [sp, #8]
 785 0014 0394     		str	r4, [sp, #12]
 786 0016 0494     		str	r4, [sp, #16]
 787 0018 0594     		str	r4, [sp, #20]
 389:Core/Src/main.c **** 
 788              		.loc 1 389 3 is_stmt 1 view .LVU197
 789 001a 4FF40070 		mov	r0, #512
 790 001e FFF7FEFF 		bl	HAL_PWREx_ControlVoltageScaling
 791              	.LVL77:
 394:Core/Src/main.c ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 792              		.loc 1 394 3 view .LVU198
 394:Core/Src/main.c ****   RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 793              		.loc 1 394 36 is_stmt 0 view .LVU199
 794 0022 0223     		movs	r3, #2
 795 0024 0693     		str	r3, [sp, #24]
 395:Core/Src/main.c ****   RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 796              		.loc 1 395 3 is_stmt 1 view .LVU200
 395:Core/Src/main.c ****   RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 797              		.loc 1 395 30 is_stmt 0 view .LVU201
 798 0026 4FF48073 		mov	r3, #256
 799 002a 0993     		str	r3, [sp, #36]
 396:Core/Src/main.c ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_NONE;
 800              		.loc 1 396 3 is_stmt 1 view .LVU202
 396:Core/Src/main.c ****   RCC_OscInitStruct.PLL.PLLState = RCC_PLL_NONE;
 801              		.loc 1 396 41 is_stmt 0 view .LVU203
 802 002c 4023     		movs	r3, #64
 803 002e 0A93     		str	r3, [sp, #40]
 397:Core/Src/main.c ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 804              		.loc 1 397 3 is_stmt 1 view .LVU204
 397:Core/Src/main.c ****   if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK)
 805              		.loc 1 397 34 is_stmt 0 view .LVU205
 806 0030 0D94     		str	r4, [sp, #52]
 398:Core/Src/main.c ****   {
 807              		.loc 1 398 3 is_stmt 1 view .LVU206
 398:Core/Src/main.c ****   {
 808              		.loc 1 398 7 is_stmt 0 view .LVU207
 809 0032 06A8     		add	r0, sp, #24
 810 0034 FFF7FEFF 		bl	HAL_RCC_OscConfig
 811              	.LVL78:
 398:Core/Src/main.c ****   {
 812              		.loc 1 398 6 view .LVU208
 813 0038 68B9     		cbnz	r0, .L46
 405:Core/Src/main.c ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 814              		.loc 1 405 3 is_stmt 1 view .LVU209
 405:Core/Src/main.c ****                               |RCC_CLOCKTYPE_PCLK1|RCC_CLOCKTYPE_PCLK2;
 815              		.loc 1 405 31 is_stmt 0 view .LVU210
 816 003a 0F23     		movs	r3, #15
 817 003c 0193     		str	r3, [sp, #4]
 407:Core/Src/main.c ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 27


 818              		.loc 1 407 3 is_stmt 1 view .LVU211
 407:Core/Src/main.c ****   RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 819              		.loc 1 407 34 is_stmt 0 view .LVU212
 820 003e 0123     		movs	r3, #1
 821 0040 0293     		str	r3, [sp, #8]
 408:Core/Src/main.c ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 822              		.loc 1 408 3 is_stmt 1 view .LVU213
 408:Core/Src/main.c ****   RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 823              		.loc 1 408 35 is_stmt 0 view .LVU214
 824 0042 0021     		movs	r1, #0
 825 0044 0391     		str	r1, [sp, #12]
 409:Core/Src/main.c ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 826              		.loc 1 409 3 is_stmt 1 view .LVU215
 409:Core/Src/main.c ****   RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 827              		.loc 1 409 36 is_stmt 0 view .LVU216
 828 0046 0491     		str	r1, [sp, #16]
 410:Core/Src/main.c **** 
 829              		.loc 1 410 3 is_stmt 1 view .LVU217
 410:Core/Src/main.c **** 
 830              		.loc 1 410 36 is_stmt 0 view .LVU218
 831 0048 0591     		str	r1, [sp, #20]
 412:Core/Src/main.c ****   {
 832              		.loc 1 412 3 is_stmt 1 view .LVU219
 412:Core/Src/main.c ****   {
 833              		.loc 1 412 7 is_stmt 0 view .LVU220
 834 004a 01A8     		add	r0, sp, #4
 835 004c FFF7FEFF 		bl	HAL_RCC_ClockConfig
 836              	.LVL79:
 412:Core/Src/main.c ****   {
 837              		.loc 1 412 6 view .LVU221
 838 0050 18B9     		cbnz	r0, .L47
 416:Core/Src/main.c **** 
 839              		.loc 1 416 1 view .LVU222
 840 0052 14B0     		add	sp, sp, #80
 841              	.LCFI12:
 842              		.cfi_remember_state
 843              		.cfi_def_cfa_offset 8
 844              		@ sp needed
 845 0054 10BD     		pop	{r4, pc}
 846              	.L46:
 847              	.LCFI13:
 848              		.cfi_restore_state
 400:Core/Src/main.c ****   }
 849              		.loc 1 400 5 is_stmt 1 view .LVU223
 850 0056 FFF7FEFF 		bl	Error_Handler
 851              	.LVL80:
 852              	.L47:
 414:Core/Src/main.c ****   }
 853              		.loc 1 414 5 view .LVU224
 854 005a FFF7FEFF 		bl	Error_Handler
 855              	.LVL81:
 856              		.cfi_endproc
 857              	.LFE144:
 859              		.section	.rodata.main.str1.4,"aMS",%progbits,1
 860              		.align	2
 861              	.LC4:
 862 0000 73746572 		.ascii	"sterownik silnikami\015\012\000"
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 28


 862      6F776E69 
 862      6B207369 
 862      6C6E696B 
 862      616D690D 
 863              		.section	.text.main,"ax",%progbits
 864              		.align	1
 865              		.global	main
 866              		.syntax unified
 867              		.thumb
 868              		.thumb_func
 870              	main:
 871              	.LFB143:
 296:Core/Src/main.c ****   /* USER CODE BEGIN 1 */
 872              		.loc 1 296 1 view -0
 873              		.cfi_startproc
 874              		@ args = 0, pretend = 0, frame = 0
 875              		@ frame_needed = 0, uses_anonymous_args = 0
 876 0000 70B5     		push	{r4, r5, r6, lr}
 877              	.LCFI14:
 878              		.cfi_def_cfa_offset 16
 879              		.cfi_offset 4, -16
 880              		.cfi_offset 5, -12
 881              		.cfi_offset 6, -8
 882              		.cfi_offset 14, -4
 303:Core/Src/main.c **** 
 883              		.loc 1 303 3 view .LVU226
 884 0002 FFF7FEFF 		bl	HAL_Init
 885              	.LVL82:
 310:Core/Src/main.c **** 
 886              		.loc 1 310 3 view .LVU227
 887 0006 FFF7FEFF 		bl	SystemClock_Config
 888              	.LVL83:
 317:Core/Src/main.c ****   MX_TIM1_Init();
 889              		.loc 1 317 3 view .LVU228
 890 000a FFF7FEFF 		bl	MX_GPIO_Init
 891              	.LVL84:
 318:Core/Src/main.c ****   MX_USART2_UART_Init();
 892              		.loc 1 318 3 view .LVU229
 893 000e FFF7FEFF 		bl	MX_TIM1_Init
 894              	.LVL85:
 319:Core/Src/main.c ****   MX_UART4_Init();
 895              		.loc 1 319 3 view .LVU230
 896 0012 FFF7FEFF 		bl	MX_USART2_UART_Init
 897              	.LVL86:
 320:Core/Src/main.c ****   MX_SPI1_Init();
 898              		.loc 1 320 3 view .LVU231
 899 0016 FFF7FEFF 		bl	MX_UART4_Init
 900              	.LVL87:
 321:Core/Src/main.c ****   MX_TIM20_Init();
 901              		.loc 1 321 3 view .LVU232
 902 001a FFF7FEFF 		bl	MX_SPI1_Init
 903              	.LVL88:
 322:Core/Src/main.c ****   /* USER CODE BEGIN 2 */
 904              		.loc 1 322 3 view .LVU233
 905 001e FFF7FEFF 		bl	MX_TIM20_Init
 906              	.LVL89:
 326:Core/Src/main.c **** 
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 29


 907              		.loc 1 326 3 view .LVU234
 908 0022 FFF7FEFF 		bl	HallSensorSettings
 909              	.LVL90:
 329:Core/Src/main.c ****   HAL_UART_Transmit(&huart2, (uint8_t*)"sterownik silnikami\r\n", strlen("sterownik silnikami\r\n")
 910              		.loc 1 329 3 view .LVU235
 911 0026 244C     		ldr	r4, .L53
 912 0028 0622     		movs	r2, #6
 913 002a 2449     		ldr	r1, .L53+4
 914 002c 2046     		mov	r0, r4
 915 002e FFF7FEFF 		bl	HAL_UART_Receive_IT
 916              	.LVL91:
 330:Core/Src/main.c ****   /* USER CODE END 2 */
 917              		.loc 1 330 3 view .LVU236
 918 0032 C823     		movs	r3, #200
 919 0034 1522     		movs	r2, #21
 920 0036 2249     		ldr	r1, .L53+8
 921 0038 2046     		mov	r0, r4
 922 003a FFF7FEFF 		bl	HAL_UART_Transmit
 923              	.LVL92:
 924 003e 33E0     		b	.L50
 925              	.L52:
 926              	.LBB6:
 347:Core/Src/main.c ****     odczyt_kierunku(data);
 927              		.loc 1 347 5 view .LVU237
 928 0040 83F00103 		eor	r3, r3, #1
 347:Core/Src/main.c ****     odczyt_kierunku(data);
 929              		.loc 1 347 24 is_stmt 0 view .LVU238
 930 0044 1F4A     		ldr	r2, .L53+12
 931 0046 1370     		strb	r3, [r2]
 348:Core/Src/main.c **** 
 932              		.loc 1 348 5 is_stmt 1 view .LVU239
 933 0048 1C4C     		ldr	r4, .L53+4
 934 004a 2046     		mov	r0, r4
 935 004c FFF7FEFF 		bl	odczyt_kierunku
 936              	.LVL93:
 350:Core/Src/main.c ****     strncpy(kat_obrotu, data + 3, 3);
 937              		.loc 1 350 5 view .LVU240
 938 0050 1D4E     		ldr	r6, .L53+16
 939 0052 0222     		movs	r2, #2
 940 0054 2146     		mov	r1, r4
 941 0056 3046     		mov	r0, r6
 942 0058 FFF7FEFF 		bl	strncpy
 943              	.LVL94:
 351:Core/Src/main.c ****     uint16_t kat_obrotu_zmienna = (uint16_t)atoi(kat_obrotu);
 944              		.loc 1 351 5 view .LVU241
 945 005c 1B4D     		ldr	r5, .L53+20
 946 005e 0322     		movs	r2, #3
 947 0060 A118     		adds	r1, r4, r2
 948 0062 2846     		mov	r0, r5
 949 0064 FFF7FEFF 		bl	strncpy
 950              	.LVL95:
 352:Core/Src/main.c **** 
 951              		.loc 1 352 5 view .LVU242
 352:Core/Src/main.c **** 
 952              		.loc 1 352 45 is_stmt 0 view .LVU243
 953 0068 2846     		mov	r0, r5
 954 006a FFF7FEFF 		bl	atoi
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 30


 955              	.LVL96:
 352:Core/Src/main.c **** 
 956              		.loc 1 352 14 view .LVU244
 957 006e 84B2     		uxth	r4, r0
 958              	.LVL97:
 358:Core/Src/main.c ****     krecenie_silnikiem(silnik, kierunek_obrotu, (uint16_t)kat_obrotu_zmienna);
 959              		.loc 1 358 5 is_stmt 1 view .LVU245
 960 0070 3220     		movs	r0, #50
 961 0072 FFF7FEFF 		bl	HAL_Delay
 962              	.LVL98:
 359:Core/Src/main.c ****     HAL_Delay(100);
 963              		.loc 1 359 5 view .LVU246
 964 0076 164D     		ldr	r5, .L53+24
 965 0078 2246     		mov	r2, r4
 966 007a 2978     		ldrb	r1, [r5]	@ zero_extendqisi2
 967 007c 3046     		mov	r0, r6
 968 007e FFF7FEFF 		bl	krecenie_silnikiem
 969              	.LVL99:
 360:Core/Src/main.c **** 
 970              		.loc 1 360 5 view .LVU247
 971 0082 6420     		movs	r0, #100
 972 0084 FFF7FEFF 		bl	HAL_Delay
 973              	.LVL100:
 365:Core/Src/main.c **** 
 974              		.loc 1 365 5 view .LVU248
 365:Core/Src/main.c **** 
 975              		.loc 1 365 23 is_stmt 0 view .LVU249
 976 0088 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 977 008a 2246     		mov	r2, r4
 978 008c 1149     		ldr	r1, .L53+28
 979 008e 0988     		ldrh	r1, [r1]
 980 0090 1148     		ldr	r0, .L53+32
 981 0092 0088     		ldrh	r0, [r0]
 982 0094 FFF7FEFF 		bl	CheckAngle
 983              	.LVL101:
 365:Core/Src/main.c **** 
 984              		.loc 1 365 21 view .LVU250
 985 0098 104B     		ldr	r3, .L53+36
 986 009a 1880     		strh	r0, [r3]	@ movhi
 987              	.LVL102:
 988              	.L49:
 365:Core/Src/main.c **** 
 989              		.loc 1 365 21 view .LVU251
 990              	.LBE6:
 370:Core/Src/main.c ****     HAL_Delay(1000);
 991              		.loc 1 370 5 is_stmt 1 view .LVU252
 992 009c FFF7FEFF 		bl	DisplayAngle
 993              	.LVL103:
 371:Core/Src/main.c **** 
 994              		.loc 1 371 5 view .LVU253
 995 00a0 4FF47A70 		mov	r0, #1000
 996 00a4 FFF7FEFF 		bl	HAL_Delay
 997              	.LVL104:
 337:Core/Src/main.c ****   {
 998              		.loc 1 337 9 view .LVU254
 999              	.L50:
 337:Core/Src/main.c ****   {
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 31


 1000              		.loc 1 337 3 view .LVU255
 344:Core/Src/main.c ****   {
 1001              		.loc 1 344 3 view .LVU256
 344:Core/Src/main.c ****   {
 1002              		.loc 1 344 21 is_stmt 0 view .LVU257
 1003 00a8 0D4B     		ldr	r3, .L53+40
 1004 00aa 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1005 00ac 054B     		ldr	r3, .L53+12
 1006 00ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 344:Core/Src/main.c ****   {
 1007              		.loc 1 344 5 view .LVU258
 1008 00b0 9A42     		cmp	r2, r3
 1009 00b2 C5D1     		bne	.L52
 1010 00b4 F2E7     		b	.L49
 1011              	.L54:
 1012 00b6 00BF     		.align	2
 1013              	.L53:
 1014 00b8 00000000 		.word	huart2
 1015 00bc 00000000 		.word	.LANCHOR4
 1016 00c0 00000000 		.word	.LC4
 1017 00c4 00000000 		.word	.LANCHOR5
 1018 00c8 00000000 		.word	.LANCHOR6
 1019 00cc 00000000 		.word	.LANCHOR7
 1020 00d0 00000000 		.word	.LANCHOR0
 1021 00d4 00000000 		.word	.LANCHOR8
 1022 00d8 00000000 		.word	.LANCHOR9
 1023 00dc 00000000 		.word	.LANCHOR10
 1024 00e0 00000000 		.word	.LANCHOR3
 1025              		.cfi_endproc
 1026              	.LFE143:
 1028              		.global	WhichRotation
 1029              		.global	AngleDifference
 1030              		.global	SecondAngle
 1031              		.global	FirstAngle
 1032              		.global	silnik
 1033              		.global	kat_obrotu
 1034              		.global	kierunek_obrotu
 1035              		.global	old_czy_przerwanie
 1036              		.global	czy_przerwanie
 1037              		.global	silnik_CP
 1038              		.global	silnik_CS
 1039              		.global	data
 1040              		.global	count
 1041              		.section	.bss.AngleDifference,"aw",%nobits
 1042              		.align	1
 1043              		.set	.LANCHOR10,. + 0
 1046              	AngleDifference:
 1047 0000 0000     		.space	2
 1048              		.section	.bss.FirstAngle,"aw",%nobits
 1049              		.align	1
 1050              		.set	.LANCHOR9,. + 0
 1053              	FirstAngle:
 1054 0000 0000     		.space	2
 1055              		.section	.bss.SecondAngle,"aw",%nobits
 1056              		.align	1
 1057              		.set	.LANCHOR8,. + 0
 1060              	SecondAngle:
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 32


 1061 0000 0000     		.space	2
 1062              		.section	.bss.WhichRotation,"aw",%nobits
 1065              	WhichRotation:
 1066 0000 00       		.space	1
 1067              		.section	.bss.czy_przerwanie,"aw",%nobits
 1068              		.set	.LANCHOR3,. + 0
 1071              	czy_przerwanie:
 1072 0000 00       		.space	1
 1073              		.section	.bss.data,"aw",%nobits
 1074              		.align	2
 1075              		.set	.LANCHOR4,. + 0
 1078              	data:
 1079 0000 00000000 		.space	6
 1079      0000
 1080              		.section	.bss.kat_obrotu,"aw",%nobits
 1081              		.align	2
 1082              		.set	.LANCHOR7,. + 0
 1085              	kat_obrotu:
 1086 0000 000000   		.space	3
 1087              		.section	.bss.kierunek_obrotu,"aw",%nobits
 1088              		.set	.LANCHOR0,. + 0
 1091              	kierunek_obrotu:
 1092 0000 00       		.space	1
 1093              		.section	.bss.old_czy_przerwanie,"aw",%nobits
 1094              		.set	.LANCHOR5,. + 0
 1097              	old_czy_przerwanie:
 1098 0000 00       		.space	1
 1099              		.section	.bss.silnik,"aw",%nobits
 1100              		.align	2
 1101              		.set	.LANCHOR6,. + 0
 1104              	silnik:
 1105 0000 0000     		.space	2
 1106              		.section	.data.count,"aw"
 1107              		.align	1
 1110              	count:
 1111 0000 D007     		.short	2000
 1112              		.section	.data.silnik_CP,"aw"
 1113              		.align	2
 1114              		.set	.LANCHOR2,. + 0
 1117              	silnik_CP:
 1118 0000 4350     		.ascii	"CP"
 1119              		.section	.data.silnik_CS,"aw"
 1120              		.align	2
 1121              		.set	.LANCHOR1,. + 0
 1124              	silnik_CS:
 1125 0000 4353     		.ascii	"CS"
 1126              		.text
 1127              	.Letext0:
 1128              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1129              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1130              		.file 5 "Drivers/CMSIS/Device/ST/STM32G4xx/Include/stm32g491xx.h"
 1131              		.file 6 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_def.h"
 1132              		.file 7 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_rcc.h"
 1133              		.file 8 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_dma.h"
 1134              		.file 9 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_tim.h"
 1135              		.file 10 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_uart.h"
 1136              		.file 11 "Core/Inc/tim.h"
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 33


 1137              		.file 12 "Core/Inc/usart.h"
 1138              		.file 13 "Core/Inc/tmag5170.h"
 1139              		.file 14 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_pwr_ex.h"
 1140              		.file 15 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
 1141              		.file 16 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal.h"
 1142              		.file 17 "Core/Inc/gpio.h"
 1143              		.file 18 "Core/Inc/spi.h"
 1144              		.file 19 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
 1145              		.file 20 "Drivers/STM32G4xx_HAL_Driver/Inc/stm32g4xx_hal_gpio.h"
 1146              		.file 21 "<built-in>"
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 34


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:20     .text.PWM_steering_period:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:26     .text.PWM_steering_period:00000000 PWM_steering_period
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:86     .text.PWM_steering_period:00000048 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:93     .text.kat_to_steps:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:99     .text.kat_to_steps:00000000 kat_to_steps
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:128    .text.kat_to_steps:00000018 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:133    .text.odczyt_kierunku:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:139    .text.odczyt_kierunku:00000000 odczyt_kierunku
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:187    .text.odczyt_kierunku:0000001c $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:192    .text.krecenie_silnikiem:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:198    .text.krecenie_silnikiem:00000000 krecenie_silnikiem
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:317    .text.krecenie_silnikiem:00000088 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:326    .text.CheckAngle:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:332    .text.CheckAngle:00000000 CheckAngle
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:391    .text.HAL_UART_RxCpltCallback:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:397    .text.HAL_UART_RxCpltCallback:00000000 HAL_UART_RxCpltCallback
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:432    .text.HAL_UART_RxCpltCallback:00000018 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:439    .text.HallSensorSettings:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:445    .text.HallSensorSettings:00000000 HallSensorSettings
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:554    .rodata.DisplayAngle.str1.4:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:567    .text.DisplayAngle:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:573    .text.DisplayAngle:00000000 DisplayAngle
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:704    .text.DisplayAngle:000000ac $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:715    .text.Error_Handler:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:721    .text.Error_Handler:00000000 Error_Handler
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:753    .text.SystemClock_Config:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:759    .text.SystemClock_Config:00000000 SystemClock_Config
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:860    .rodata.main.str1.4:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:864    .text.main:00000000 $t
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:870    .text.main:00000000 main
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1014   .text.main:000000b8 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1065   .bss.WhichRotation:00000000 WhichRotation
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1046   .bss.AngleDifference:00000000 AngleDifference
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1060   .bss.SecondAngle:00000000 SecondAngle
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1053   .bss.FirstAngle:00000000 FirstAngle
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1104   .bss.silnik:00000000 silnik
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1085   .bss.kat_obrotu:00000000 kat_obrotu
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1091   .bss.kierunek_obrotu:00000000 kierunek_obrotu
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1097   .bss.old_czy_przerwanie:00000000 old_czy_przerwanie
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1071   .bss.czy_przerwanie:00000000 czy_przerwanie
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1117   .data.silnik_CP:00000000 silnik_CP
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1124   .data.silnik_CS:00000000 silnik_CS
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1078   .bss.data:00000000 data
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1110   .data.count:00000000 count
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1042   .bss.AngleDifference:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1049   .bss.FirstAngle:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1056   .bss.SecondAngle:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1066   .bss.WhichRotation:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1072   .bss.czy_przerwanie:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1074   .bss.data:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1081   .bss.kat_obrotu:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1092   .bss.kierunek_obrotu:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1098   .bss.old_czy_przerwanie:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1100   .bss.silnik:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1107   .data.count:00000000 $d
ARM GAS  C:\Users\jakub\AppData\Local\Temp\cckpLapa.s 			page 35


C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1113   .data.silnik_CP:00000000 $d
C:\Users\jakub\AppData\Local\Temp\cckpLapa.s:1120   .data.silnik_CS:00000000 $d

UNDEFINED SYMBOLS
HAL_Delay
htim1
strncmp
HAL_GPIO_WritePin
HAL_TIM_PWM_Start
HAL_TIM_PWM_Stop
htim20
HAL_UART_Receive_IT
huart2
DisableCRC
TMAG5170_dev_conf_settings
TMAG5170_sens_conf_settings
TMAG5170_sys_conf_settings
TMAG5170_al_conf_settings
GetAngle
HAL_UART_Transmit
sprintf
strlen
memset
HAL_PWREx_ControlVoltageScaling
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_Init
MX_GPIO_Init
MX_TIM1_Init
MX_USART2_UART_Init
MX_UART4_Init
MX_SPI1_Init
MX_TIM20_Init
strncpy
atoi
